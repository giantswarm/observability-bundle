rbac:
  - apiGroups:
      - postgresql.cnpg.io
    resources:
      - clusters
    verbs: ["list", "watch"]

resources:
  - groupVersionKind:
      group: postgresql.cnpg.io
      version: v1
      kind: Cluster

    labelsFromPath:
      namespace: [metadata, namespace]
      cluster: [metadata, name]

    metrics:
      - name: kube_cnpg_cluster_info
        help: "Info about a CloudNativePG Cluster including its status phase."
        type: Info
        each:
          info:
            labelsFromPath:
              phase: [status, phase]
